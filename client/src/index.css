@tailwind base;
@tailwind components;
@tailwind utilities;

/* LIGHT MODE */
:root {
  --button-outline: rgba(0,0,0,.10);
  --badge-outline: rgba(0,0,0,.05);

  /* Interaction overlays */
  --elevate-1: rgba(0,0,0,.03);
  --elevate-2: rgba(0,0,0,.08);

  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --border: 214 32% 91%;

  --card: 240 10% 98%;
  --card-foreground: 222 47% 11%;
  --card-border: 220 14% 94%;

  --sidebar: 240 9% 96%;
  --sidebar-foreground: 222 47% 11%;
  --sidebar-border: 214 20% 88%;
  --sidebar-primary: 217 91% 60%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 217 19% 88%;
  --sidebar-accent-foreground: 222 47% 11%;
  --sidebar-ring: 217 91% 60%;

  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --popover-border: 214 32% 91%;

  --primary: 217 91% 60%;
  --primary-foreground: 0 0% 100%;

  --secondary: 217 19% 90%;
  --secondary-foreground: 222 47% 11%;

  --muted: 217 14% 92%;
  --muted-foreground: 215 16% 47%;

  --accent: 217 18% 91%;
  --accent-foreground: 222 47% 11%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --input: 214 32% 85%;
  --ring: 217 91% 60%;

  --chart-1: 217 91% 54%;
  --chart-2: 142 76% 36%;
  --chart-3: 280 89% 56%;
  --chart-4: 38 92% 50%;
  --chart-5: 200 89% 48%;

  --font-sans: Inter, system-ui, sans-serif;
  --font-mono: JetBrains Mono, monospace;

  --radius: .5rem; /* 8px */

  --shadow-2xs: 0px 2px 0px 0px hsl(222 47% 11% / 0.00);
  --shadow-xs:  0px 2px 0px 0px hsl(222 47% 11% / 0.00);
  --shadow-sm:  0px 2px 0px 0px hsl(222 47% 11% / 0.00), 0px 1px 2px -1px hsl(222 47% 11% / 0.00);
  --shadow:     0px 2px 0px 0px hsl(222 47% 11% / 0.00), 0px 1px 2px -1px hsl(222 47% 11% / 0.00);
  --shadow-md:  0px 2px 0px 0px hsl(222 47% 11% / 0.00), 0px 2px 4px -1px hsl(222 47% 11% / 0.00);
  --shadow-lg:  0px 2px 0px 0px hsl(222 47% 11% / 0.00), 0px 4px 6px -1px hsl(222 47% 11% / 0.00);
  --shadow-xl:  0px 2px 0px 0px hsl(222 47% 11% / 0.00), 0px 8px 10px -1px hsl(222 47% 11% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(222 47% 11% / 0.00);

  --tracking-normal: 0em;
  --spacing: 0.25rem;

  /* ========= Border color computation =========
   * Replace deprecated/unsupported `hsl(from â€¦)` with color-mix().
   * We keep the plain hsl() as a fallback and immediately override.
   * In light mode we darken the color by mixing with black.
   */
  --opaque-button-border-abs: 8%;
  --opaque-button-border-contrast: black;

  /* Fallbacks */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-accent-border:  hsl(var(--sidebar-accent));
  --primary-border:         hsl(var(--primary));
  --secondary-border:       hsl(var(--secondary));
  --muted-border:           hsl(var(--muted));
  --accent-border:          hsl(var(--accent));
  --destructive-border:     hsl(var(--destructive));

  /* Overrides with color-mix (widely supported) */
  --sidebar-primary-border: color-mix(in oklab, hsl(var(--sidebar-primary)) calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --sidebar-accent-border:  color-mix(in oklab, hsl(var(--sidebar-accent))  calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --primary-border:         color-mix(in oklab, hsl(var(--primary))         calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --secondary-border:       color-mix(in oklab, hsl(var(--secondary))       calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --muted-border:           color-mix(in oklab, hsl(var(--muted))           calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --accent-border:          color-mix(in oklab, hsl(var(--accent))          calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --destructive-border:     color-mix(in oklab, hsl(var(--destructive))     calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
}

.dark {
  --button-outline: rgba(255,255,255,.10);
  --badge-outline: rgba(255,255,255,.05);

  /* Interaction overlays */
  --elevate-1: rgba(255,255,255,.04);
  --elevate-2: rgba(255,255,255,.09);

  --background: 222 47% 11%;
  --foreground: 213 31% 91%;
  --border: 217 33% 24%;

  --card: 224 40% 13%;
  --card-foreground: 213 31% 91%;
  --card-border: 220 35% 17%;

  --sidebar: 222 44% 9%;
  --sidebar-foreground: 213 31% 91%;
  --sidebar-border: 220 38% 14%;
  --sidebar-primary: 217 91% 60%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 220 18% 15%;
  --sidebar-accent-foreground: 213 31% 91%;
  --sidebar-ring: 217 91% 60%;

  --popover: 224 71% 16%;
  --popover-foreground: 213 31% 91%;
  --popover-border: 217 50% 22%;

  --primary: 217 91% 60%;
  --primary-foreground: 0 0% 100%;

  --secondary: 220 18% 20%;
  --secondary-foreground: 213 31% 91%;

  --muted: 220 15% 18%;
  --muted-foreground: 215 20% 65%;

  --accent: 217 16% 19%;
  --accent-foreground: 213 31% 91%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --input: 217 33% 28%;
  --ring: 217 91% 60%;

  --chart-1: 217 91% 65%;
  --chart-2: 142 76% 45%;
  --chart-3: 280 89% 66%;
  --chart-4: 38 92% 60%;
  --chart-5: 200 89% 58%;

  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs:  0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm:  0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow:     0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md:  0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg:  0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl:  0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);

  /* In dark mode we lighten the color by mixing with white */
  --opaque-button-border-abs: 9%;
  --opaque-button-border-contrast: white;

  /* Fallbacks */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-accent-border:  hsl(var(--sidebar-accent));
  --primary-border:         hsl(var(--primary));
  --secondary-border:       hsl(var(--secondary));
  --muted-border:           hsl(var(--muted));
  --accent-border:          hsl(var(--accent));
  --destructive-border:     hsl(var(--destructive));

  /* Overrides */
  --sidebar-primary-border: color-mix(in oklab, hsl(var(--sidebar-primary)) calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --sidebar-accent-border:  color-mix(in oklab, hsl(var(--sidebar-accent))  calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --primary-border:         color-mix(in oklab, hsl(var(--primary))         calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --secondary-border:       color-mix(in oklab, hsl(var(--secondary))       calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --muted-border:           color-mix(in oklab, hsl(var(--muted))           calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --accent-border:          color-mix(in oklab, hsl(var(--accent))          calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
  --destructive-border:     color-mix(in oklab, hsl(var(--destructive))     calc(100% - var(--opaque-button-border-abs)), var(--opaque-button-border-contrast) var(--opaque-button-border-abs));
}

@layer base {
  * { @apply border-border; }
  body { @apply font-sans antialiased bg-background text-foreground; }
}

/* =================== UTILITIES =================== */
@layer utilities {

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type="search"]::-webkit-search-cancel-button { @apply hidden; }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* Escape hatches to disable default hover/active overlays */
  .no-default-hover-elevate {}
  .no-default-active-elevate {}

  /* Toggle surfaces live behind content so hover/active can stack */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: -1;
  }
  .toggle-elevate.toggle-elevated::before { background-color: var(--elevate-2); }

  /* If there's a 1px border, extend overlay behind it */
  .border.toggle-elevate::before { inset: -1px; }

  /* Elevation overlays */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 999;
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after { background-color: var(--elevate-1); }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after { background-color: var(--elevate-2); }

  /* Extend overlay behind 1px borders (class names unified, duplicate removed) */
  .border.hover-elevate:not(.no-default-hover-elevate)::after,
  .border.active-elevate:not(.no-default-active-elevate)::after,
  .border.hover-elevate-2:not(.no-default-hover-elevate)::after,
  .border.active-elevate-2:not(.no-default-active-elevate)::after {
    inset: -1px;
  }

  /* ====== Infinite marquee for the chain logo carousel ====== */
  @keyframes marquee-left {
    0%   { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  .marquee {
    display: flex;
    white-space: nowrap;
    will-change: transform;
    animation: marquee-left 20s linear infinite;
  }
  .marquee:hover { animation-play-state: paused; }
}

/* Hide Stripe devtools badge injected by Stripe.js */
stripe-devtools,
stripe-devtools-badge,
[data-stripe-devtools],
#stripe-devtools-badge,
.stripe-devtools-badge { display: none !important; }
